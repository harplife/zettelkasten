# C4D의 STL 포맷 변환 문제
C4D 에서 작업한 모델을 `.stl` 포맷으로 변환하면 객체가 깨지는 현상이 일어남. 이 문제는 애초에 삼각형 폴리곤으로 작업하거나 또는 Subdivision 으로 어느 정도 해결이 가능하지만, `.stl `변환 작업을 하기 전에 문제가 생길 부분을 미리 고쳐보거나, 다른 프로그램에서 모델/파일을 변환하는 것도 방법이지 않을까 함.

## C4D 에서 폴리곤 변환
C4D 에서 일반적으로 `Quad` (사각형 폴리곤) 으로 작업하기 때문에, `.stl` 포맷으로 변환할 때 모든 폴리곤이 `Triangle` (삼각형 폴리곤) 으로 변환하는 작업을 걸쳐감. 이 작업은 C4D 에 `Triangulate` 기능과 유사한 것으로 보임 (커맨드 매니저에 찾아보면 나옴).

![[Pasted image 20230608162343.png]]

`.stl` 파일로 변환하기 전에 미리 `Triangulate` 기능을 사용해보는 것도 좋을 듯? 하지만 이 기능은 따로 설정이 없기 때문에, 변환 작업에 대한 자세한 디테일을 조절할 수 없음 (관련해서 나중에 설명).

(원본)
![[Pasted image 20230608162414.png|500]]
(`Triangulate` 적용 후)
![[Pasted image 20230608162429.png|500]]

참고로 `Remesh` 로도 폴리곤을 변환할 수 있긴함; 하지만 폴리곤 개수/밀도를 기준으로 변환이 되기 때문에 폴리곤 개수/밀도가 부족하면 모형이 깨지는 현상이 무조건 일어남.

![[Pasted image 20230608163427.png]]
![[Pasted image 20230608163434.png|500]]

## 다른 프로그램을 통해서 변환
C4D 의 `Remesh` 가 가지고 있지 않는 설정은 **Adaptive Density/Edge Length (동적 크기 조절)** 임. 이 설정은 모서리 또는 굴곡처럼 표면에 변동이 큰 부분에 좀 더 폴리곤 개수를 많이 할당해주는 것으로, 모형을 최대한 깨지지 않도록 해주는 설정임.

아마 Maya, ZBrush 등 여러 프로그램들은 이게 가능할 듯? 확인은 아직 안 했음.

후디니의 `Remesh` 는 이 기능이 있음.

C4D 에서 Sculpting 으로 어느정도 만져준 모델을 변환하는 작업;
(원본)
![[Pasted image 20230608170123.png|300]]
![[Pasted image 20230608170133.png|300]]

(Houdini - Remesh - Adaptive 변환)
![[Pasted image 20230608170148.png|500]]
![[Pasted image 20230608170204.png|500]]

퀄리티 저하되는 현상이 확실히 없음!

참고로, 이미 삼각형 폴리곤으로 작업한 모델을 `.fbx` 로 가져와서 `C4D` 에서 `.stl` 로 변환하는 경우 이미 삼각형 폴리곤으로 되어있기 때문에 별도로 `Triangulate` 기능이 적용되지 않음.

## 간단한 구멍 매꾸는 방법
`Voronoi Fracture` 를 생성해서 구멍난 객체를 안에 넣어줌.

![[Pasted image 20230608164221.png|300]]
![[Pasted image 20230608164234.png]]
![[Pasted image 20230608164254.png]]

`Voronoi Fracture` 속성 창에 들어가서 `Sources` 탭 누르고 목록 칸 안에 있는 것 제거. 이어서, `Object` 탭에 들어가서 `Colorize Fragments`, `Create N-gon Surfaces` 옵션들 모두 비활성화 해주고, `Optimize and Close Holes` 옵션을 활성화 해주면 구멍이 매꿔짐.