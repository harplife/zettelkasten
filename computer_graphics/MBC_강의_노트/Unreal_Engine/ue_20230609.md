# 강의 노트
- 강의 시작일 : **2023-05-30**
- 정주익 강사님 진행
- 강의 \#8

## Indoor Lighting
### 기본 세팅
- 기본 프로젝트 라이팅 제거
	- ![[Pasted image 20230612052637.png|200]]
- World Setting > Light Mass :: bForceNoPrecomputedLighting 활성화 후 비활성화
- Building Lighting (Ctrl + Shft + ;)
- 기본 라이팅 세팅
	- Lighting > Skylight 생성 > Real Time Capture 활성화
	- Lighting > Directional Light 생성
	- Visual Effect > Exponential Height Fog 생성
	- Visual Effect > Sky Atmosphere 생성
	- Visual Effect > Post Process 생성 > Infinite Extent 활성화 > 노출 보정 활성화, Min/Max Brightness 활성화 및 값 1 입력
- Sphere 생성 > M_Metal_Burnished_Steel 재질 입히기
- Point Light 생성 > Specular Scale 값 0  > Attenuation Radius 값 대략 3400 > 라이트에 줄이 생기면 위치를 조정하거나 또는 Shadow Bias 값을 조절

### Distance Field Shadow
- 그림자의 외각선이 부드럽게 처리되도록 하는 작업이 필요함; Distance Field Shadow 를 활용
	- ![[Pasted image 20230612054406.png|500]] (목표)
	- ![[Pasted image 20230612054444.png|500]] (문제)
- Project Setting > Engine :: Rendering :: Lighting :: Mesh Distance Field 활성화 및 재시작
	- ![[Pasted image 20230612054319.png|300]]
- Point Light 의 Distance Field Shadow 옵션 활성화
- Distance Field Shadow 는 모델을 기준으로 "대충" 라이팅을 계산함; 라이팅이 계산되는 모델을 보기 위해 설정
	- Viewport > View :: Visualization :: Mesh Distance Field 활성화
	- Viewport > Mode > Light 제외 모드 활성화 (Alt + 3)
	- ![[Pasted image 20230612055127.png|500]]
- Distance Field Shadow 를 사용하는 경우, 라이팅이 계산되는 모델이 깨지는 현상이 있음; 이를 해결해야 함
	- ![[Pasted image 20230612055254.png|500]] (문제)
	- 객체 Edit > Generate Mesh Distance Field 옵션 활성화
		- ![[Pasted image 20230612055548.png|200]]
	- 객체 Edit > Distance Field Resolution Scale 증가 (대략 20) > 변경 내용 적용
	- ![[Pasted image 20230612055947.png|500]] (해결)
	- 이러한 작업을 모든 모델에 하기 번거럽고 무거워지니까, 중요한 객체에만 해줄것

### Reflection
- 창문 뚤린 벽 하나 생성
	- ![[Pasted image 20230612060537.png|500]]
- 기본 라이팅 제거
	- ![[Pasted image 20230612092746.png]]
- 커스텀 라이팅
	- ![[Pasted image 20230612092941.png]]
	- SkyLight > Real Time Capture
	- PostProcessVolume > Infinite Bound > Exposure Compensation > Min/Max EV100 값 1
	- World Settings :: Lightmass :: Force No Precomputed Lighting 옵션 활성화 후 비활성화
- 라이팅 굽기 (Static 또는 Stationary 만 빌드가 가능함)
	- DirectionalLight > Stationary 로 변경
	- SkyLight > Static 로 변경
	- Ctrl + Shft + ;
- 실사 라이트매스 설정 : World Settings > Lightmass > 스태틱 라이팅 레벨 스케일 0.5, 간접 라이팅 반사 수 10, 스카이 라이트 반사 수 10, 간접 라이팅 퀄리티 2.0, 간접 라이팅 스무드니스 1.2
	- ![[Pasted image 20230612101127.png]]
	- 스태틱 라이팅 레벨 스케일 x 간접 라이팅 스무드니스 = 1 이 되도록 유지해야 함
		- ![[Pasted image 20230612101347.png]]
- 인도어 라이팅 시 바닥/벽 재질이 어두운 색이면 라이팅을 흡수하기 때문에 전체적으로 어두울 수 있으니 주의할 것; 되도록이면 바닥/벽 재질은 밝은 색으로 할 것; 필요시 DirectionalLight 의 인다이렉트 라이팅 강도를 올려서 밝기 조절 할 것.
- 평면에 비추어진 라이팅의 외곽선에 계단현상이 일어나면 이는 Light Map 의 해상도가 부족해서 생기는 현상으로 봄;
	- ![[Pasted image 20230612102933.png|500]] (월드 세팅)
	- ![[Pasted image 20230612103047.png]] (라이팅 밀도 보기)
		- ![[Pasted image 20230612103147.png|500]]
		- Alt + 0 / 4 로 왔다갔다 하면서 뷰포트 보기
		- 파랑색은 빛의 밀도가 적은 것, 초록색은 중간, 빨간색은 많은 것임; 초록색이 제일 좋은 것임; 핑크색은 현재 선택된 객체를 뜻함;
			- 밀도를 조절하기 위해서 각 객체의 디테일에 Lighting :: Overriden Light Map Res 의 값을 올려줘야 함 (2진수 단위로); 되도록이면 파랑색이 없게 조절할 것;
				- ![[Pasted image 20230612112910.png|500]]
- 모서리가 어둡게 나오는 것은 AO 문제임
	- ![[Pasted image 20230612113115.png|500]]
- 새로운 객체를 넣으면 라이팅이 적용되지 않음; 새로운 객체에도 라이팅을 적용할 수 있게 해주려면 Volume :: Lightmass Importance Volume 을 넣어줘야 함;
	- 바운더리의 크기를 공간 크기에 맞춰줄것;
		- ![[Pasted image 20230612113458.png|500]]
	- 이 기능은 공간 안에 있는 라이팅 정보를 여러개의 작은 구로서 저장해서 새로 들어오는 객체에 이 정보로서 라이팅 정보를 추론하는 것임;
	- Viewport > Visualize > Volumetric Lightmap 옵션을 키면 라이팅 정보를 저장하는 여러 개의 작은 구들을 볼 수 있음
		- ![[Pasted image 20230612121949.png|500]]
	- 다시 렌더하면 가운데 Sphere 에 라이팅이 적용되는 것을 볼 수 있음
		- ![[Pasted image 20230612122154.png|300]]
- 