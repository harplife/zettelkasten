# 강의 노트
- 강의 시작일 : **2023-05-30**
- 정주익 강사님 진행
- 강의 \#9
- [택배기사 - 공식 예고편 | 넷플릭스 |  Youtube](https://youtu.be/OGx85MetThQ) <-- 언리얼로 만든 드라마
	- 현재 추세로 TV 쇼가 언리얼로 만들어지고 있음
- 포폴 작업할 때 UE4, UE5 버전으로 둘 다 할 수 있으면 좋음
- 

## 라이팅 기본
- Static vs. Stationary vs. Movable
	- Static 은 가장 가볍지만 물체가 움직이면 라이팅이 제대로 적용되지 않음
	- Movable 은 가장 무거우며 물체가 움직이는 것도 감안해서 라이팅이 됨
	- Stationary 는 Static 과 Movable 의 중간 정도로 보면 됨
- 라이팅을 빌드하기 위해서는 라이팅이 Static / Stationary 여야 함
- 라이팅이 Static 인 경우 Static 으로 걸린 객체만 라이팅이 제대로 적용되며, Stationary 또는 Movable 은 라이팅이 제대로 적용되지 않음 (큐브 위아래 순서 Static/Stationary/Movable)
	- ![[Pasted image 20230612095623.png|500]]
- DirectionalLight 는 Stationary 로 하는게 제일 좋음
	- ![[Pasted image 20230612100111.png|500]]
- 언리얼에서 uv 채널 0 과 1 이 있음; 0 은 우리가 일반적으로 알고있는 UV 맵이며, 1은 라이트 전용 맵임

## 레이트레이싱
- 레이트레이싱은 장면에 모든 것이 있어야 제대로 적용됨 - 현장 (XR 등) 에서 사용하기는 어려움;
- 프로젝트 세팅 > 기본 RHI 값을 DirectX 12 로 지정 > Ray Tracing 활성화 > Enable Virtual Texture Support 활성화 > Enable virtual texture on texture import 활성화 > Enable virtual texture lightmaps 활성화
- 플러그인 > GPU Lightmass 활성화
- 여기까지 하고 재시작 > 적용하는데 20분 정도 소요될 수 있음
- Build > GPU Lightmass 창 꺼내주기
	- ![[Pasted image 20230612103848.png]]
	- ![[Pasted image 20230612103904.png|400]]
- GPU Lightmass > Build Lighting
	- ![[Pasted image 20230612103958.png]]
- GPU 로 렌더링하면 전체적으로 좀 어두운 경향이 있음
	- 어두운 공간을 어떻게 잘 라이팅을 하는지가 관건임
- 빌드 속도 올려주기 : GPU Lightmass > Viewport Realtime 비활성화 > Show Progress Bars 비활성화
- GPU Lightmass > Use First Bounce Ray Guiding, Use Irradiance Cache 활성화
	- GI Samples, Irradiance Caching, First Bounce Ray Guiding 입력값이 주로 렌더의 품질을 관장함
- 어두운 영역을 밝게 해주려면 DirectionalLight 의 Indirect Light Intensity 값을 올려줄 것
	- 이것도 부족하면 PostProcessVolume 에서 indrect light intensity 값 올려줄 것
- 레이트레이싱은 라이팅 뿐만이 아니라 유리/반사/그림자 등 모든 것을 조절함
- [언리얼 레이트레이싱 관련 정보](https://docs.unrealengine.com/4.26/en-US/RenderingAndGraphics/RayTracing/)
	- Ambient Occlusion 을 비교하면 일반 AO 는 외곽선에 그림자가 생기게 하는 반면, 레이트레이싱은 그림자가 생기는 부분이 실사와 유사하게 잘 됨
		- ![[Pasted image 20230612110649.png|500]]
- 레이트레이싱의 각 디테일의 설정은 PostProcessVolume 에서 조절하면 됨
	- 반사에 반사가 검게 처리되는 경우 : Ray Tracing Reflections > Max. Bounces 증가
	- 메탈 재질에 Roughness 가 있을때 지글거리는 경우 : Ray Tracing Reflections > Samples Per Pixel 증가
- 유리 재질을 만들때 PostProcessVolume 디테일에서 Ray Tracing Reflections :: Include Translucent Object 활성화, Translucency :: Type 을 Ray Tracing 으로 설정해줘야 함
	- + 유리 재질 Material 에서 Two Sided 활성화 해줘야 하며, Translucency :: Lighting Mode 를 Surface ForwardShading 으로 변경해줘야 함.
		- Opacity 값 0.2
		- Refraction 값 1.5
	- PostProcessVolume > Ray Tracing Translucency 의 설정을 만져주면 유리 재질 구현을 좀 더 손볼 수 있음; 지글거리는 현상은 Samples Per Pixel 을 올려서 어느정도 해결 (각도에 따라 좀 불가능 한 듯)
- 모든 레이트레이싱 기능을 활성화 하는 명령어 (\`) : `r.RayTracing.ForceAllRayTracingEffects 1`
	- ![[Pasted image 20230612114522.png]]
	- 1/0 == True/False
	- -1 == Reset
		- PostProcessingVolume 에 있는 설정이 모두 기본 설정으로 바뀜
	- False 로 된 경우 PostProcessingVolume 에 있는 RayTracing 설정들이 모두 무시됨
- DirectionalLight 에도 Ray Tracing 관련 설정이 있음
	- Ray Tracing :: Samples Per Pixel 값을 올려줘서 퀄리티를 올릴 수 있음
- Ray Tracing 의 단점
	- LandScape 를 렌더할 때 오류가 생김;
	- Volumetric Fog 가 렌더가 안 됨
	- 이러한 경우 Directional Light 에서 Cast Ray Tracing Shadows 옵션을 비활성화 해야함;
	- Ray Tracing Shadows 가 필요하되 Volumetric Fog 도 필요한 경우;
		- DirectionalLight 하나 더 생성
			- #todo 이부분 약간 놓쳐서 강의 영상 다시 볼것
- Viewport > Lit > Path Tracing 으로 옥테인 느낌으로 렌더 가능하되, 실무에서 사용되지 않음

### ArchViz Interior
- ArchViz Interior 에셋을 마켓플레이스에서 다운로드하고 프로젝트 생성
- 