---
aliases: [Visual C++ Notes, 비주얼 C++ 노트]
tags: [computer_science, computer_vision, computer_graphics, GUI, KNOU, study]
status: ongoing
created: 2022-10-20
edited: 2022-10-20
---

# Visual Studio 설치 및 설정
교과서에는 2019 버전 설치를 말하는데.. 일단 2022 버전으로 설치해서 진행할 것.

## 도움말 뷰어 설치
오프라인 Visual C++ 도움말 설치. 기본적으로 온라인에서 매번 도움말을 호출해오지만, 도움말 뷰어에서 VC++ 도움말을 설치하면 오프라인 도움말을 불러옴으로 훨씬 빠름.

일단 이 [링크](https://learn.microsoft.com/ko-kr/visualstudio/help-viewer/installation?view=vs-2022)를 통해서 도움말 뷰어를 설치하고, 상단 메뉴 `Help` 아래 `Add and Remove Help Content` 클릭하면 밑과 같은 창이 뜸.

![[비주얼_스튜디오_도움말_뷰어_창_20221020.png]]

교과서에는 Visual C++ 도움말을 설치하라고 하는데, 검색에 뜨지 않음. 그냥 C++ 관련된 모든 도움말을 업데이트 해보고 진행함.

## 파일 확장자
C++ 프로젝트를 진행하며 발생되는 파일들의 유형은 밑과 같다.

![[cpp_file_formats.png]]


`.sdf` 포맷의 파일들은 용량이 크고 "필요가 없으니" 프로젝트를 생성할 때 생성되지 않게 설정할 수 있음.

상단 메뉴 `Tools` -> `Options` -> `Text Editor` -> `C/C++` -> `Advanced` -> `Browsing Database Fallback`에 있는 설정들을 밑에 그림과 같이 설정.

![[visual_studio_cpp_turnoff_sdf_file_generation.png]]

## 백신 검사 예외 설정
C++로 개발하다 보면 백신 프로그램에서 바이러스로 오인하는 경우가 발생할 수 있으니 백신 프로그램에서 프로젝트 폴더 경로를 검사 예외로 지정하는게 좋다.

# 제1장
- 윈도우 프로그램은 Windows 운영체제의 지원을 받으며 실행되는 응용 프로그램이므로 과거 콘솔 프로그램과 달리 Windows 운영체제의 특징을 그대로 반영하고 있다.
- **Windows 운영체제에서 실행되는 윈도우 프로그램들은 편리한 사용자 인터페이스를 지원받고 장치 독립적이며 멀티태스킹이 가능하다.**
- Visual C++을 이용하여 윈도우 프로그램을 개발하는 경우, 개발자는 Windows 운영체제에서 제공하는 WinAPI 함수와 방대한 클래스 라이브러리인 MFC을 자유롭게 사용할 수 있어 적은 노력과 시간으로도 과거에는 생각할 수 없었던 대규모 프로그램들을 개발할 수 있다.
- 윈도우 프로그램을 공부하려면, 먼저 WinAPI 함수를 사용하는 API 프로그래밍을 살펴본 다음 MFC에서 제공하는 방대한 클래스를 사용하는 MFC 프로그래밍을 공부해야 한다.
- 이 장에서는 먼저, WinAPI를 사용하여 윈도우를 생성하는 윈도우 프로그램에 대해 설명한다. Windows 운영체제의 지원을 받는 윈도우 프로그램의 특징을 살펴보고 WinAPI로 구성된 윈도우 프로젝트를 작성해 본다. 윈도우를 등록/생성하고 보여 주는 데 필요한 각각의 WinAPI 함수와 이를 위해 필요한 메시지 처리방식, 윈도우 프로시저 함수 등을 중심으로 설명한다.

## 학습목표
1. 윈도우 프로그램의 특징을 이해한다.
2. 메시지 중심의 처리과정을 이해한다.
3. 간단한 윈도우를 생성하는 윈도우 프로젝트를 작성할 수 있다.
4. WinMain 함수의 역할과 코드를 이해할 수 있다.
5. 윈도우 프로시저 함수의 역할을 이해할 수 있다.
6. 차일드 윈도우와 버튼 컨트롤을 생성하는 데 필요한 함수와 추가 코드를 작성할 수 있다.

## 주요용어
- Windows 운영체제
- 멀티태스킹
- 메시지 구동방식
- MFC
- GDI
- API
- WinMain
- 윈도우 프로시저
- CALLBACK 함수
- 윈도우 클래스
- 윈도우 클래스 등록
- 윈도우 생성
- 메시지 루프
- TextOut 함수
- 버튼
- 컨트롤

## 윈도우 프로그램
- MS Windows는 Microsoft사에서 만든 개인용 컴퓨터의 운영체제 이름으로 간단히 Windows라고 부른다.
- 1990년대 초까지만 해도 개인용 컴퓨터의 운영체제는 MS사에서 제작한 DOS였다.
- 1990년대 이후 DOS는 여러 가지 버전의 Windows로 바뀌었다.
- 윈도우 프로그램이란 Windows에서 실행할 수 있는 응용 프로그램이다.
- 우리가 자주 사용하는 윈도우 프로그램은 실행 결과가 항상 사각형 윈도우(Window) 형태인데, 자세히 보면 윈도우 안에 타이틀바, 툴바, 메뉴바, 버튼 등 여러 개의 윈도우가 들어 있다.

### 윈도우 프로그램 특징
Windows에서 실행하는 윈도우 프로그램은 다음과 같은 특징을 갖는다.

#### 장치 독립적
- 윈도우 프로그램을 작성할 떄는 설치된 하드웨어의 사양을 고려하지 않고 자유롭게 작성할 수 있다.
- 과거 DOS에서 프로그램은 화면에 점 하나를 찍는 단순 작업을 위해 그래픽카드 종류, 화면 해상도 지원 범위, 컬러 지원 범위 등을 검사해 본 후 여기에 맞게 소스 코드를 작성해야만 했다.
- 윈도우 프로그램의 경우 하드웨어 장치가 어떤 모델이든 상관없다. Windows에 요청하면 운영체제가 하드웨어에 적당한 드라이버를 찾아서 스스로 설치하므로 윈도우 프로그램은 하드웨어에 종속되지 않는다. 즉, 언제나 동일한 소스 코드를 작성한다.

#### 멀티태스킹
- Windows는 멀티태스킹(Multitasking)을 지원하므로 여러 윈도우 프로그램이 동시에 실행된다.
- 화면에 여러 개의 윈도우가 동시에 있어서 사용자 입장에서는 여러 개의 태스크가 동시에 실행되는 것처럼 보인다.
- 각각의 윈도우 프로그램은 다른 윈도우 프로그램에 의해 자신의 작업 영역에 영향을 받을 수 있으므로, 윈도우 프로그램은 항상 자신의 작업 영역을 복수할 수 있도록 작성되어야 한다.

#### 메시지 구동방식
- 윈도우 프로그램은 메시지 구동방식(Message-Driven)으로 동작한다.
- 메시지 구동방식은 Windows의 가장 중요한 특징으로, 모든 윈도우 프로그램은 이러한 메시지 구동방식에 적절히 대처할 수 있도록 작성되어야 한다.

#### GUI
- Windows는 사용자 인터페이스인 GUI (Graphic User Interface)로 동작된다.
- 사용자의 컴퓨터 사용환경이 모두 그래픽 모드에서 이루어지므로 윈도우 프로그램도 이에 맞는 GUI를 제공해야 한다.
- 윈도우 프로그램은 GUI를 제공하기 위한 리소스 (예: 비트맵 이미지, 아이콘, 커서, 메뉴, 대화상자 등)가 필요하다.

### 기초 용어
윈도우 프로그램을 작성할 때 기본적으로 알아야 하는 기초 용어

#### 운영체제
- 운영체제(OS : Operating System)은 컴퓨터의 하드웨어를 직접적으로 제어하고 관리하는 시스템 소프트웨어이다.
- 운영체제는 실행되는 응용 프로그램이 메모리와 CPU, 입출력장치 등의 자원을 사용할 수 있도록 만들어 주고, 그들을 추상화하여 파일 시스템 등의 서비스를 제공한다.
- 운영체제는 여러 개의 응용 프로그램이 실행되는 동안 모든 프로세스를 스케줄링하여 마치 그들이 동시에 수행되는 듯한 효과를 낸다.

#### 커널
- 커널(Kernel)은 운영체제의 핵심 부분으로 운영체제의 다른 부분 및 응용 프로그램 수행에 필요한 여러 가지 서비스를 제공한다.

#### 소스 코드
- 소스 코드(Source Code)는 컴퓨터 프로그램을 사람이 읽고 사용할 수 있는 프로그래밍 언어로 기술한 글을 말한다.

#### 컴퓨터 프로그램
- 컴퓨터 프로그램(Computer Program)은 컴퓨터에 의해 실행되는 지시사항의 모음인 컴퓨터 소프트웨어의 한 예이다.
- 프로그램은 대부분 실행 중에 사용자의 입력에 반응하도록 구현된 명령어의 집합으로 구성되어 있다.

#### MS DOS
- MS DOS(Microsoft Disk Operating System)은 MS사가 개발한 IBM PC용 운영체제이다.
- 1981년에 처음 제공되어 널리 사용되었으나, 1995년 이후에 Windows로 대체되면서 개발이 중단되었다.

#### MS Windows
- MS Windows는 MS사가 개발한 컴퓨터 운영체제이다.
- MS DOS에서 멀티태스킹과 GUI 환경 등을 제공하기 위해 개발된 운영체제로 현재 PC로 가장 많이 사용되고 있다.

#### 멀티태스킹
- 다수의 작업/프로세스/태스크가 중앙 처리장치(CPU)와 같은 공용자원을 나누어 사용하는 것을 말한다.
- 멀티태스킹은 스케줄링(Scheduling)이라는 방식을 사용하여 컴퓨터 사용자에게 병렬 연산이 이루어지는 것과 같은 환경을 제공한다..

#### Windows와 Window
- Windows는 운영체제를 뜻한다.
- Window는 화면에 나타나는 창을 뜻한다.

#### GDI (Graphic Device Interface)
- Windows의 하위 시스템 중 하나의 DLL 모듈로, 모든 출력장치를 제어하는 역할을 한다.
- 윈도우 프로그램에서 요청하는 모든 출력은 GDI를 통해 실제 출력장치인 화면이나 프린터에 출력된다.
- 윈도우 프로그램에서 GDI 함수를 사용하여 프린터, 화면 등에 출력하면 GDI는 설치된 해당 드라이버를 연결하여 출력한다.
- GDI로 인해 프로그래머는 장치에 일일이 신경 쓸 필요가 없으므로, 이를 장치 독립적(Device Indepence)라고 표현한다.

#### DC (Device Context)
- 출력에 필요한 모든 정보를 갖고 있는 데이터 구조체로, GDI가 생성하고 관리한다.
- 출력에 필요한 정보란 문자열의 모양을 지정하는 폰트, 선의 색상과 굵기, 채움 무늬와 색상, 그리기 모드 등을 뜻한다.
- 윈도우 프로그램에서 무언가를 출력하려면 반드시 DC가 필요하다.

![[visual_cpp_device_dependence_diagram.png]]

### API
- API (Application Programming Interface)는 운영체제가 응용 프로그램을 위해 제공하는 함수의 집합이다.
- 운영체제는 하드웨어와 응용 프로그램 사이에 위치하며 응용 프로그램을 대신하여 하드웨어를 관리하고 메모리를 관리하는 시스템 소프트웨어를 말한다.
- 특정 운영체제에서 실행되는 응용 프로그램은 운영체제의 종속적일 수밖에 없으며, 운영체제가 규정한 대로 하드웨어를 액세스해야 한다.
- Windows와 같은 멀티태스킹 운영체제의 경우, 응용 프로그램 간 상호작용을 할 때 운영체제의 규정을 따라야 한다.
  ![[visual_cpp_hardware_api_program_relationship.png]]
- **운영체제는 가장 기본적인 동작을 할 수 있는 함수의 집합을 응용 프로그램에 제공하여, 이를 WinAPI라고 한다.**
- API는 운영체제의 중요한 한 부분이며 운영체제 그 자체라고도 할 수 있다.

### SW - OS - HW 관계
운영체제와 응용 프로그램, MFC, API, GDI의 관계

![[visual_cpp_os_sw_hw_relationship.png]]

- 커널은 메모리 관리와 프로그램 실행을 담당한다.
- 사용자(User)는 사용자 인터페이스와 윈도우를 관리한다.
- GDI는 모든 출력장치를 제어한다.

### WinAPI에서 사용하는 자료형

